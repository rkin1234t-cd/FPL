# FPL - Faction Plugin for Luckperms

## Команды

```
/fps — Открыть главное меню организации
/f invite <ник> — Пригласить игрока на работу
/f kick <ник> — Уволить игрока из организации (присваивается ранг "гражданин")
/f deputy <ник> — Назначить игрока заместителем
/f setleader <ник> — Назначить нового лидера организации (только администрация, всему серверу выводится сообщение, прежний лидер становится гражданином) ((только для администрации с правом fpl.admin))
/f promote <ник> — Повысить игрока по рангу (можно только до своего статуса)
/f demote <ник> — Понизить игрока по рангу (можно только до любого ранга ниже своего статуса)
/f info — Показать информацию о вашей организации
/f list — Список всех организаций/работ
/f leaders — список лидеров всех фракций в формате: %fraction% - %leader% (Оффлайн/онлайн)
/f motd set <текст> — Установить объявление дня
/f access — Настроить права доступа (меню с редактированием рангов во фракции) ((только для администрации с правом fpl.admin))
/f money balance — Баланс казны
/f money deposit — Пополнить казну
/f money withdraw — Вывести деньги из казны
/f money history — История казны
/f calls — Список вызовов
/f base — Проложить маршрут к базе
/f arrest <ник> — Посадить в КПЗ
/f unarrest <ник> — Освободить из КПЗ
/f shtraf <ник> — Выписать штраф
/f setstars <ник> — Выдать уровень розыска
/f license give <type> <ник> — Выдать лицензию
/f specialize <ник> <специальность> — Назначить специальность
/f setpsalary <ник> <сумма> — Установить зарплату лично игроку
/f job <ник> <должность> — Назначить должность
/f job list — Список всех должностей и специальностей
/f job info <ник> — Показать инфо о должности и специальностей
/f quit — Уволиться из организации
/f help — Справка по командам и возможностям системы
/ud - меню управления всеми фракциями ((только для администрации с правом fpl.admin))
/ud %фракция% %команда% - эмуляция команды от лица лидера определенное фракции ((только для администрации с правом fpl.admin))
```
# Модули
## Список модулей
### Raid - Модуль на ивенты
```
/f raid start <название> — Запустить рейд/событие ((только для администрации с правом fpl.admin)).
/f raid create <название> <displayname> <ussualy/timer> <если timer то тут указывается сколько есть на выполнение времени в секундах>.
/f raid stop <название> - Событие останавливается и удаляется.
```
#### Примечания и конфигурации
Если модуль включёен то администрация может создавать события в boss bar

### Train - модуль на обучение
```
/f train <ник> — Начать обучение для новичка
```
#### Примечания и конфигурации
Если модуль включёен то лидер или заместитель может начать обучение игроку. При включении модуля создаётся во фракции небольшой текст-заглушка который необходимо заменить на обучающий.№# 
## Информация о модулях
Модули можно включить и выключить, при выключении вся информация из конфига о модуле выключенном удаляется



# Информация о фракциях
## Типы фракций
В системе существуют два типа фракций:
- **ussualy** — обычный тип фракции
- **parliament** — специальный тип фракции для правительственных организаций

**Важно:** Статус MP (депутат) доступен только во фракциях с типом 'parliament'. В обычных фракциях с типом 'ussualy' этот статус не используется.
# Информация о рангах

## LuckPerms
### Создание трека при создании фракции
Когда создается фракция, автоматически создается LuckPerms-трек с названием:
```
faction_%фракция%
```
В этом треке будут храниться все должности (ранги) организации, устанавливается порядок продвижения (promotion/demotion)

Пример:
Для фракции "Полиция" трек будет: `faction_police`

### Создание групп для ролей (должностей) в треках
При добавлении новой должности:
Создается LuckPerms-группа с уникальным ID вида: `%фракция%_%название_должности%_%порядковый_ID%`
```
police_commander_1
police_officer_2
police_recruit_3
hospital_doctor_1
hospital_nurse_2
```

В группу вносятся permissions соответствующего ранга, displayname (prefix), status (leader, deputy, mp, default, "")

Порядковый ID: назначается по порядку добавления должности (от 1 и далее внутри фракции).
LuckPerms-трек обновляется: новая группа добавляется в нужное место последовательности.

### Создание групп для специальностей
Для каждой специальности создается отдельная LuckPerms-группа с ID вида: `%фракция%%название_должности%%порядковый_ID%_spec%Специальность_ID%`
```
police_doctor_2_spec1
police_doctor_2_spec2
hospital_doctor_1_spec3
```

Порядковый ID у специальности совпадает с ID должности, к которому она относится,
Специальность ID — нумеруется отдельно для каждой должности от 1 (для первой специальности этой должности), далее по порядку.

Для группы специальности настраиваются permissions, displayname (prefix), status.

### Права статусов
#### Статус Leader (Лидер)
Игроки со статусом `leader` имеют полные права управления фракцией:

**Управление персоналом:**
- Приглашать новых участников (`/f invite`)
- Увольнять участников (`/f kick`)
- Назначать заместителей (`/f deputy`)
- Повышать и понижать по рангам до своего уровня (`/f promote`, `/f demote`)
- Назначать должности (`/f job`)
- Назначать специальности (`/f specialize`)
- Устанавливать персональные зарплаты (`/f setpsalary`)

**Управление фракцией:**
- Устанавливать объявление дня (`/f motd set`)
- Управлять казной (пополнение, снятие) (`/f money deposit`, `/f money withdraw`)
- Захватывать и освобождать территории (`/f claim`, `/f unclaim`)
- Доступ к складу (`/f storage`)

**Специальные полномочия:**
- Выдавать лицензии (`/f license give`)
- Лечить игроков (`/f heal`)
- Арестовывать и освобождать (`/f arrest`, `/f unarrest`)
- Выписывать штрафы (`/f shtraf`)
- Выдавать уровни розыска (`/f setstars`)
- Начинать обучение новичков (`/f train`) *(если модуль включен)*

#### Статус Deputy (Заместитель)
Игроки со статусом `deputy` имеют большинство прав лидера, но с ограничениями:

**Управление персоналом:**
- Приглашать новых участников (`/f invite`)
- Увольнять участников рангом ниже себя (`/f kick`)
- Повышать и понижать по рангам ниже своего уровня (`/f promote`, `/f demote`)
- Назначать должности для рангов ниже себя (`/f job`)
- Назначать специальности (`/f specialize`)
- Устанавливать персональные зарплаты (`/f setpsalary`)

**Управление фракцией:**
- Устанавливать объявление дня (`/f motd set`)
- Пополнять казну (`/f money deposit`)
- Захватывать территории (`/f claim`)

**Специальные полномочия:**
- Начинать обучение новичков (`/f train`) *(если модуль включен)*

**Ограничения заместителя:**
- Не может назначать других заместителей
- Не может снимать деньги из казны (`/f money withdraw`)
- Не может управлять участниками своего ранга или выше

### Пример структуры:
**Трек: faction_police**
- Группа: police_commander_1 (status: leader)
- Группа: police_deputy_2 (status: deputy)
- Группа: police_officer_3 (status: "")
  - Спец.: police_officer_3_spec1 (displayname: "Сапёр", status: "")
  - Спец.: police_officer_3_spec2 (displayname: "Переговорщик", status: "")
- Группа: police_recruit_4 (status: "")

**Трек: faction_hospital**
- Группа: hospital_doctor_1
  - Спец.: hospital_doctor_1_spec1 (displayname: "Хирург")
  - Спец.: hospital_doctor_1_spec2 (displayname: "Реаниматолог")
  - Спец.: hospital_doctor_1_spec3 (displayname: "Диагност")
- Группа: hospital_nurse_2
- и т.д.

### Displayname и status
У каждой группы в LuckPerms, и у роли специальности, есть displayname (prefix), который выводится через плейсхолдеры (например в табе, чате, меню).

Каждый ранг (группа) и специальность имеют status — для определения прав ("" – обычный, deputy – заместитель, leader – лидер, mp – депутат).

## Дополнительная информация:
- Все роли фракции и специальные роли создаются и управляются через LuckPerms-группы и треки.
- Должностной и специальности ID всегда уникальны в пределах фракции и должности.
- При увольнении или снятии роли игроку присваивается дефолтная группа фракции (status: default).
- Продвижение/понижение идет строго по треку, специальности назначаются заменой LuckPerms-группы специальности для текущей должности.
- Изменения отображаются игрокам через placeholders: префикс и статус видно всюду (чат, таб, меню фракции).
- Все параметры должности и специальности прописываются при создании ранга/роли и специальности.
  Выдать этим документам особые права плагина в виде fpl.%право%:
  - Выдавать лицензии (`/f license give`)
  - Лечить игроков (`/f heal`)
  - Арестовывать и освобождать (`/f arrest`, `/f unarrest`)
  - Выписывать штрафы (`/f shtraf`)
  - Выдавать уровни розыска (`/f setstars`)
  - Проверять лицензию (`/f license check`)

#### Пример LuckPerms-идентификаторов:
- `police_doctor_2_spec1` — фракция: полиция, должность: врач (2-й по счету), спец.: хирург (1)
- `hospital_nurse_2_spec2` — фракция: больница, должность: медсестра (2), спец.: реаниматолог (2)


сделай следующие плейсхолдеры:
%fpl_fraction_%player%% - плейсхолдер фракции где находится игрок
%fpl_fraction_leader% - лидер фракции
%fpl_fraction_rang% - ранг игрока или специальность (отображается именно displayname)

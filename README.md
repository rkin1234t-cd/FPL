# FPL - Faction Plugin for Luckperms

## Команды

```
/fps — Открыть главное меню организации
/f invite <ник> — Пригласить игрока на работу
/f kick <ник> — Уволить игрока из организации (присваивается ранг "гражданин")
/f deputy <ник> — Назначить игрока заместителем
/f setleader <ник> — Назначить нового лидера организации (только администрация, всему серверу выводится сообщение, прежний лидер становится гражданином)
/f promote <ник> — Повысить игрока по рангу (можно только до своего статуса)
/f demote <ник> — Понизить игрока по рангу (можно только до любого ранга ниже своего статуса)
/f info — Показать информацию о вашей организации
/f list — Список всех организаций/работ
/f status — Статус вашей организации
/f motd set <текст> — Установить объявление дня
/f claim — Захватить территорию
/f claim all — Захватить максимум территорий
/f unclaim — Снять приват с территории
/f unclaim all — Снять приват со всех территорий
/f access — Настроить права доступа
/f map — Показать карту территории
/f money balance — Баланс казны
/f money deposit — Пополнить казну
/f money withdraw — Вывести деньги из казны
/f money history — История казны
/f calls — Список вызовов
/f base — Проложить маршрут к базе
/f arrest <ник> — Посадить в КПЗ
/f unarrest <ник> — Освободить из КПЗ
/f shtraf <ник> — Выписать штраф
/f setstars <ник> — Выдать уровень розыска
/f license give guns <ник> — Выдать лицензию на оружие
/f license give business <ник> — Выдать лицензию на бизнес
/f raid start — Запустить рейд/событие
/f storage — Доступ к складу
/f heal <ник> — Лечение игрока
/f specialize <ник> <специальность> — Назначить специальность
/f salary <ник> <сумма> — Установить зарплату
/f job <ник> <должность> — Назначить должность
/f job specialize <ник> <специальность> — Сменить специальность на должности
/f job list — Список всех должностей и специальностей
/f job info <ник> — Показать инфо о должности и специальности
/f job requestspecialty <специальность> — Заявка на изменение специальности
/f train <ник> — Начать обучение для новичка
/f tasks — Список текущих задач
/f report <ник> — Отправить отчёт о деятельности
/f quit — Уволиться из организации
/f help — Справка по командам и возможностям системы
```

## Информация о рангах

### LuckPerms

#### Типы фракций
В системе существуют два типа фракций:
- **ussualy** — обычный тип фракции
- **parliament** — специальный тип фракции для правительственных организаций

**Важно:** Статус MP (депутат) доступен только во фракциях с типом 'parliament'. В обычных фракциях с типом 'ussualy' этот статус не используется.

#### Создание трека при создании фракции
Когда создается фракция, автоматически создается LuckPerms-трек с названием:
```
faction_%фракция%
```
В этом треке будут храниться все должности (ранги) организации, устанавливается порядок продвижения (promotion/demotion)

Пример:
Для фракции "Полиция" трек будет: `faction_police`

#### Создание групп для ролей (должностей) в треках
При добавлении новой должности:
Создается LuckPerms-группа с уникальным ID вида: `%фракция%%название_должности%%порядковый_ID%`
```
police_commander_1
police_officer_2
police_recruit_3
hospital_doctor_1
hospital_nurse_2
```

В группу вносятся permissions соответствующего ранга, displayname (prefix), status (leader, deputy, mp, default, "")

Порядковый ID: назначается по порядку добавления должности (от 1 и далее внутри фракции).
LuckPerms-трек обновляется: новая группа добавляется в нужное место последовательности.

#### Создание групп для специальностей
Для каждой специальности создается отдельная LuckPerms-группа с ID вида: `%фракция%%название_должности%%порядковый_ID%_spec%Специальность_ID%`
```
police_doctor_2_spec1
police_doctor_2_spec2
hospital_doctor_1_spec3
```

Порядковый ID у специальности совпадает с ID должности, к которому она относится,
Специальность ID — нумеруется отдельно для каждой должности от 1 (для первой специальности этой должности), далее по порядку.

Для группы специальности настраиваются permissions, displayname (prefix), status.

#### Пример структуры:
**Трек: faction_police**
- Группа: police_commander_1 (status: leader)
- Группа: police_deputy_2 (status: deputy)
- Группа: police_officer_3 (status: "")
  - Спец.: police_officer_3_spec1 (displayname: "Сапёр", status: "")
  - Спец.: police_officer_3_spec2 (displayname: "Переговорщик", status: "")
- Группа: police_recruit_4 (status: "")

**Трек: faction_hospital**
- Группа: hospital_doctor_1
  - Спец.: hospital_doctor_1_spec1 (displayname: "Хирург")
  - Спец.: hospital_doctor_1_spec2 (displayname: "Реаниматолог")
  - Спец.: hospital_doctor_1_spec3 (displayname: "Диагност")
- Группа: hospital_nurse_2
- и т.д.

#### Displayname и status
У каждой группы в LuckPerms, и у роли специальности, есть displayname (prefix), который выводится через плейсхолдеры (например в табе, чате, меню).

Каждый ранг (группа) и специальность имеют status — для определения прав ("" – обычный, deputy – заместитель, leader – лидер, mp – депутат).

### Дополнительная информация:
- Все роли фракции и специальные роли создаются и управляются через LuckPerms-группы и треки.
- Должностной и специальности ID всегда уникальны в пределах фракции и должности.
- При увольнении или снятии роли игроку присваивается дефолтная группа фракции (status: default).
- Продвижение/понижение идет строго по треку, специальности назначаются заменой LuckPerms-группы специальности для текущей должности.
- Изменения отображаются игрокам через placeholders: префикс и статус видно всюду (чат, таб, меню фракции).
- Все параметры должности и специальности прописываются при создании ранга/роли и специальности.

#### Пример LuckPerms-идентификаторов:
- `police_doctor_2_spec1` — фракция: полиция, должность: врач (2-й по счету), спец.: хирург (1)
- `hospital_nurse_2_spec2` — фракция: больница, должность: медсестра (2), спец.: реаниматолог (2)

Это полностью оптимизированный способ интеграции рангов и специальностей с LuckPerms и управления ими через треки и группы!
